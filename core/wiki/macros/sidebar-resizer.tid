title: $:/core/macros/sidebar-resizer
tags: $:/tags/Global

\procedure sidebar-resizer-pointerdown-actions()
<%if [[$:/state/sidebar/resizing]is[missing]then<event-mousebutton>match[left]then<modifier>match[normal]] %>
	<$let dragDiff=<<event-fromselected-posx>> storyRiverWidth={{{ [<event-fromcatcher-posx>subtract<dragDiff>] }}} sidebarWidth={{{ [<tv-widgetnode-width>subtract<event-fromcatcher-posx>add<dragDiff>] }}}>
		<$action-setfield $tiddler="$:/state/sidebar/dimensions"
			drag-diff=<<dragDiff>>
			story-river-width=<<storyRiverWidth>>
			sidebar-width=<<sidebarWidth>>
		/>
		<$action-setfield $tiddler="$:/state/sidebar/resizing" text="yes"/>
	</$let>
<% endif %>
\end
\procedure sidebar-resizer-pointerup-actions()
<%if [[$:/state/sidebar/resizing]!is[missing]] %>
	<$action-deletetiddler $tiddler="$:/state/sidebar/resizing"/>
<% endif %>
\end
\procedure sidebar-resizer-pointermove-actions()
<%if [[$:/state/sidebar/resizing]!is[missing]] %>
	<$let storyRiverWidth={{{ [<event-fromcatcher-posx>subtract{$:/state/sidebar/dimensions!!drag-diff}] }}} sidebarWidth={{{ [<tv-widgetnode-width>subtract<event-fromcatcher-posx>add{$:/state/sidebar/dimensions!!drag-diff}] }}}>
		<$action-setfield $tiddler="$:/state/sidebar/dimensions"
			story-river-width=<<storyRiverWidth>>
			sidebar-width=<<sidebarWidth>>
		/>
	</$let>
<% endif %>
\end