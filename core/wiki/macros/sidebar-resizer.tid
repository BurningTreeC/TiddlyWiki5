title: $:/core/macros/sidebar-resizer
tags: $:/tags/Global

\procedure sidebar-resizer-pointerdown-actions()
<%if [[$:/state/sidebar/resizing]is[missing]then<event-mousebutton>match[left]] %>
	<$let leftOffset={{{ [<event-fromviewport-posx>subtract<event-fromcatcher-posx>] }}} viewportWidth={{{ [<leftOffset>add<tv-widgetnode-width>] }}} dragDiff=<<event-fromselected-posx>> storyRiverWidth={{{ [<event-fromviewport-posx>subtract<dragDiff>] }}} sidebarWidth={{{ [<viewportWidth>subtract<event-fromviewport-posx>add<dragDiff>] }}}>
		<$action-setfield $tiddler="$:/state/sidebar/dimensions"
			drag-diff=<<dragDiff>>
			left-offset=<<leftOffset>>
			story-river-width=<<storyRiverWidth>>
			sidebar-width=<<sidebarWidth>>/>
		<$action-setfield $tiddler="$:/state/sidebar/resizing" text="yes"/>
	</$let>
<% endif %>
\end
\procedure sidebar-resizer-pointerup-actions()
<%if [[$:/state/sidebar/resizing]!is[missing]] %>
	<$action-deletetiddler $tiddler="$:/state/sidebar/resizing"/>
<% endif %>
\end
\procedure sidebar-resizer-pointermove-actions()
<%if [[$:/state/sidebar/resizing]!is[missing]] %>
	<$let leftOffset={{$:/state/sidebar/dimensions!!left-offset}} viewportWidth={{{ [<leftOffset>add<tv-widgetnode-width>] }}} storyRiverWidth={{{ [<event-fromviewport-posx>subtract{$:/state/sidebar/dimensions!!drag-diff}] }}} sidebarWidth={{{ [<viewportWidth>subtract<event-fromviewport-posx>add{$:/state/sidebar/dimensions!!drag-diff}] }}}>
		<$action-setfield $tiddler="$:/state/sidebar/dimensions"
			story-river-width=<<storyRiverWidth>>
			sidebar-width=<<sidebarWidth>>/>
	</$let>
<% endif %>
\end